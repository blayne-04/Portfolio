---
import resumePdf from '../assets/Resume.pdf?url';
---

<nav class="navbar" data-open="false">
  <div class="logo">
    <img src="/icon.png" alt="Icon" width="100" height="100" />
  </div>

  <button
    class="nav-toggle"
    type="button"
    aria-expanded="false"
    aria-controls="nav-menu"
    data-nav-toggle
  >
    <span class="sr-only">Toggle navigation</span>
    <span class="nav-toggle__bar"></span>
  </button>

  <div class="nav-menu" id="nav-menu" data-nav-menu>
    <ul class="nav-links">
      <li>
        <a href="/">
          <span class="nav-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 20 20">
              <path fill="currentColor" d="M10.707 2.293a1 1 0 0 0-1.414 0l-7 7a1 1 0 0 0 1.414 1.414L4 10.414V17a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-6.586l.293.293a1 1 0 0 0 1.414-1.414z" />
            </svg>
          </span>
          <span class="nav-label">Home</span>
        </a>
      </li>
      <li>
        <a href="/projects">
          <span class="nav-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 512 512">
              <path fill="currentColor" d="M0 80c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v16h128V80c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48h-96c-26.5 0-48-21.5-48-48v-16H192v16c0 7.3-1.7 14.3-4.6 20.5L256 288h80c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48h-96c-26.5 0-48-21.5-48-48v-96c0-7.3 1.7-14.3 4.6-20.5L128 224H48c-26.5 0-48-21.5-48-48z" />
            </svg>
          </span>
          <span class="nav-label">Projects</span>
        </a>
      </li>
      <li>
        <a href="/about">
          <span class="nav-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 20 20">
              <path fill="currentColor" fill-rule="evenodd" d="M18 10a8 8 0 1 1-16 0a8 8 0 0 1 16 0m-6-3a2 2 0 1 1-4 0a2 2 0 0 1 4 0m-2 4a5 5 0 0 0-4.546 2.916A5.99 5.99 0 0 0 10 16a5.99 5.99 0 0 0 4.546-2.084A5 5 0 0 0 10 11" clip-rule="evenodd" />
            </svg>
          </span>
          <span class="nav-label">About me</span>
        </a>
      </li>
    </ul>

    <span class="nav-divider" aria-hidden="true">|</span>

    <a class="resume-link" href={resumePdf} download>
      <span class="nav-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 20 20">
          <path fill="currentColor" fill-rule="evenodd" d="M6 2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7.414A2 2 0 0 0 15.414 6L12 2.586A2 2 0 0 0 10.586 2zm5 6a1 1 0 1 0-2 0v3.586l-1.293-1.293a1 1 0 1 0-1.414 1.414l3 3a1 1 0 0 0 1.414 0l3-3a1 1 0 0 0-1.414-1.414L11 11.586z" clip-rule="evenodd" />
        </svg>
      </span>
      <span class="nav-label">Resume</span>
    </a>
  </div>
</nav>

<style>
.navbar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 1000;
  display: flex;
  align-items: center;
  gap: 1.5rem;
  padding: 0.65rem 2rem;
  background: var(--color-surface);
  width: 100%;
  box-sizing: border-box;
}

.logo {
  display: flex;
  align-items: center;
}

.logo img {
  display: block;
}

.nav-toggle {
  display: none;
  margin-left: auto;
  width: 2.75rem;
  height: 2.75rem;
  border-radius: 999px;
  border: 1px solid transparent;
  background: none;
  position: relative;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: border-color 0.2s ease;
}

.nav-toggle:focus-visible,
.nav-toggle:hover {
  border-color: var(--color-border-soft);
}

.nav-toggle__bar,
.nav-toggle__bar::before,
.nav-toggle__bar::after {
  content: '';
  position: absolute;
  width: 1.5rem;
  height: 2px;
  background: var(--color-text-inverse);
  transition: transform 0.2s ease, opacity 0.2s ease;
  transform-origin: center;
}

.nav-toggle__bar::before {
  transform: translateY(-6px);
}

.nav-toggle__bar::after {
  transform: translateY(6px);
}

.navbar[data-open='true'] .nav-toggle__bar {
  background: transparent;
}

.navbar[data-open='true'] .nav-toggle__bar::before {
  transform: rotate(45deg);
}

.navbar[data-open='true'] .nav-toggle__bar::after {
  transform: rotate(-45deg);
}

.nav-menu {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2rem;
  margin-left: 0;
}

.nav-links {
  display: flex;
  justify-content: center;
  gap: 2.5rem;
  list-style: none;
  margin: 0 auto;
  padding: 0;
}

.nav-links li a {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  color: var(--color-text-inverse);
  text-decoration: none;
  transition: color 0.2s ease;
  font-size: 1.2rem;
}

.nav-links li a:hover {
  color: var(--color-accent);
}

.nav-divider {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  margin-left: auto;
  margin-right: 1.5rem;
  color: var(--color-border-soft);
  font-size: 1.2rem;
  line-height: 1;
}

.nav-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.nav-icon svg {
  width: 1.5rem;
  height: 1.5rem;
}

.nav-label {
  display: inline-flex;
  align-items: center;
  font-size: 1.2rem;
}

.resume-link {
  display: inline-flex;
  align-items: center;
  gap: 0.75rem;
  color: var(--color-text-inverse);
  text-decoration: none;
  font-size: 1.2rem;
  transition: color 0.2s ease;
}

.resume-link:hover {
  color: var(--color-accent);
}

.resume-link .nav-icon svg {
  width: 1.5rem;
  height: 1.5rem;
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

@media (max-width: 900px) {
  .navbar {
    padding: 0.65rem 1.5rem;
  }

  .nav-toggle {
    display: inline-flex;
  }

  .nav-menu {
    position: absolute;
    top: calc(100% + 0.75rem);
    left: 1.5rem;
    right: 1.5rem;
    display: none;
    flex-direction: column;
    align-items: stretch;
    gap: 1.25rem;
    padding: 1.25rem;
    border-radius: 16px;
    border: none;
    background: var(--color-surface);
      margin-left: 0;
  }

  .navbar[data-open='true'] .nav-menu {
    display: flex;
  }

  .nav-links {
    flex-direction: column;
    gap: 1rem;
    margin: 0;
  }

  .nav-links li a {
    font-size: 1.1rem;
  }

  .nav-divider {
    display: none;
  }

  .resume-link {
    font-size: 1.1rem;
  }
}
</style>

<script type="module">
  const navbar = document.querySelector('.navbar');
  const toggle = navbar?.querySelector('[data-nav-toggle]');
  const menu = navbar?.querySelector('[data-nav-menu]');

  if (navbar && toggle && menu) {
    const closeMenu = () => {
      navbar.dataset.open = 'false';
      toggle.setAttribute('aria-expanded', 'false');
    };

    toggle.addEventListener('click', () => {
      const isOpen = navbar.dataset.open === 'true';
      if (isOpen) {
        closeMenu();
      } else {
        navbar.dataset.open = 'true';
        toggle.setAttribute('aria-expanded', 'true');
      }
    });

    menu.querySelectorAll('a').forEach((link) => {
      link.addEventListener('click', () => {
        closeMenu();
      });
    });

    window.addEventListener('keydown', (event) => {
      if (event.key === 'Escape') {
        closeMenu();
      }
    });

    const mediaQuery = window.matchMedia('(min-width: 901px)');
    const handleMediaChange = (event) => {
      if (event.matches) {
        closeMenu();
      }
    };

    if (typeof mediaQuery.addEventListener === 'function') {
      mediaQuery.addEventListener('change', handleMediaChange);
    } else if (typeof mediaQuery.addListener === 'function') {
      mediaQuery.addListener(handleMediaChange);
    }
  }
</script>



